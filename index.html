<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kalkulator Lot Contract Size</title>
<style>
    body {
        background: #0b0f19;
        color: white;
        font-family: Arial, sans-serif;
        padding: 20px;
    }
    .box {
        max-width: 400px;
        margin: auto;
        padding: 20px;
        border: 1px solid #1f2d3a;
        border-radius: 10px;
        background: rgba(255,255,255,0.03);
        backdrop-filter: blur(8px);
    }
    input, select {
        width: 100%;
        padding: 10px;
        margin-top: 6px;
        background: #111827;
        border: 1px solid #334155;
        color: white;
        border-radius: 6px;
    }
    .title {
        text-align: center;
        font-size: 20px;
        margin-bottom: 20px;
    }
    #result {
        margin-top: 20px;
        text-align: center;
        font-size: 30px;
        color: #00eaff;
        font-weight: bold;
    }
</style>
</head>
<body>

<div class="box">
    <div class="title">Kalkulator Lot (Contract Size)</div>

    <label>Saldo ($)</label>
    <input id="balance" type="number" value="1000" oninput="calculateLot()">

    <label>Risk (%)</label>
    <input id="risk" type="number" value="1" oninput="calculateLot()">

    <label>Pair</label>
    <select id="pair" onchange="calculateLot()"></select>

    <label>Stop Loss (Pips / Points)</label>
    <input id="sl" type="number" value="20" oninput="calculateLot()">

    <label>Harga Sekarang (Opsional)</label>
    <input id="price" type="number" value="150" oninput="calculateLot()">

    <div id="result">0.00</div>
</div>

<script>
/* =============================
   CONTRACT SIZE PAIR
   ============================= */
const CONTRACT_SIZE = {
    "EURUSD": 100000,
    "GBPUSD": 100000,
    "AUDUSD": 100000,
    "NZDUSD": 100000,

    "USDJPY": 100000,
    "EURJPY": 100000,
    "GBPJPY": 100000,

    "XAUUSD": 100,     // 100 oz
    "XAGUSD": 5000,    // 5000 oz

    "US30": 1,
    "US100": 1,
    "US500": 1,

    "BTCUSD": 1,       // 1 BTC
    "ETHUSD": 10,      // 10 ETH

    "USOIL": 1000      // 1000 barrel
};

/* =============================
   AUTO LOAD PAIR LIST
   ============================= */
const pairSelect = document.getElementById("pair");
Object.keys(CONTRACT_SIZE).forEach(p => {
    const op = document.createElement("option");
    op.value = p;
    op.textContent = p;
    pairSelect.appendChild(op);
});
pairSelect.value = "XAUUSD"; // default

/* =============================
   HITUNG PIP-VALUE DARI CONTRACT
   ============================= */
function pipValue(pair, price = 1) {
    const cs = CONTRACT_SIZE[pair];
    if (!cs) return 0;

    // Forex major
    if (pair.endsWith("USD") && !pair.includes("JPY")) {
        return cs * 0.0001; // 1 pip
    }

    // Forex JPY
    if (pair.includes("JPY")) {
        return (cs * 0.01) / price;
    }

    // Gold
    if (pair === "XAUUSD") return cs * 0.1;

    // Silver
    if (pair === "XAGUSD") return cs * 0.01;

    // Crypto → per $1 move
    if (pair === "BTCUSD") return cs * 1;
    if (pair === "ETHUSD") return cs * 1;

    // Index → $1 per point
    if (pair.startsWith("US")) return 1;

    // Oil
    if (pair === "USOIL") return cs * 0.01;

    return 1;
}

/* =============================
   FINAL LOT CALCULATOR
   ============================= */
function calculateLot() {
    const balance = parseFloat(document.getElementById("balance").value) || 0;
    const riskPct = parseFloat(document.getElementById("risk").value) || 0;
    const sl = parseFloat(document.getElementById("sl").value) || 0;
    const pair = document.getElementById("pair").value;
    const price = parseFloat(document.getElementById("price").value) || 100;

    const resultEl = document.getElementById("result");

    if (!balance || !riskPct || !sl || !pair) {
        resultEl.textContent = "0.00";
        return;
    }

    const pipVal = pipValue(pair, price);
    const riskAmount = balance * (riskPct / 100);

    const lot = riskAmount / (sl * pipVal);

    resultEl.textContent = lot.toFixed(2);
}
calculateLot();
</script>

</body>
</html>
