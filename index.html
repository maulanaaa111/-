<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kalkulator Lot</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #0d1117;
        color: white;
        padding: 20px;
    }
    .box {
        max-width: 420px;
        margin: auto;
        background: #161b22;
        padding: 20px;
        border-radius: 10px;
        border: 1px solid #30363d;
    }
    input, select {
        width: 100%;
        padding: 10px;
        margin-top: 6px;
        background: #0d1117;
        border: 1px solid #30363d;
        color: white;
        border-radius: 6px;
    }
    .result {
        margin-top: 25px;
        padding: 20px;
        background: #0d1117;
        text-align: center;
        border-radius: 6px;
        border: 1px solid #30363d;
        font-size: 2rem;
        color: #00eaff;
        font-weight: bold;
    }
</style>
</head>

<body>
<div class="box">
    <h2>Kalkulator Lot</h2>

    <label>Saldo</label>
    <input id="balance" type="number" value="100">

    <label>Risk (%)</label>
    <input id="risk" type="number" value="1">

    <label>Pair</label>
    <select id="pair"></select>

    <label>Stop Loss (Pips)</label>
    <input id="sl" type="number" placeholder="Contoh: 20">

    <div class="result" id="result">0.00</div>
</div>


<script>
/const CONTRACT_SIZE = {
    "EURUSD": 100000,
    "GBPUSD": 100000,
    "AUDUSD": 100000,
    "NZDUSD": 100000,

    "USDJPY": 635,
    "EURJPY": 100000,
    "GBPJPY": 100000,

    "XAUUSD": 100,   // 100 oz
    "XAGUSD": 5000,  // 5000 oz

    "US30": 1,
    "US100": 1,
    "US500": 1,

    "BTCUSD": 1,     // 1 BTC
    "ETHUSD": 10,    // 10 ETH

    "USOIL": 1000
};

function pipValueFromContract(pair, price = 1) {
    const cs = CONTRACT_SIZE[pair];

    if (!cs) return 0;

    // Forex major
    if (pair.endsWith("USD")) {
        if (!pair.includes("JPY")) {
            return cs * 0.0001; // 1 pip
        }
    }

    // Forex JPY
    if (pair.includes("JPY")) {
        return cs * 0.01 / price; // convert JPY â†’ USD
    }

    // XAUUSD
    if (pair === "XAUUSD") return cs * 0.1;

    // XAGUSD
    if (pair === "XAGUSD") return cs * 0.01;

    // Crypto (pip = $1 move)
    if (pair === "BTCUSD") return cs * 1;
    if (pair === "ETHUSD") return cs * 1;

    // Index (point = $1)
    if (pair.startsWith("US")) return 1;

    // Oil
    if (pair === "USOIL") return cs * 0.01;

    return 1;
}

function calculateLotContract() {
    const balance = parseFloat(document.getElementById("balance").value) || 0;
    const riskPct = parseFloat(document.getElementById("risk").value) || 0;
    const sl = parseFloat(document.getElementById("sl").value) || 0;
    const pair = document.getElementById("pair").value;

    const resultEl = document.getElementById("result");

    if (!pair || !balance || !sl || !riskPct) {
        resultEl.textContent = "0.00";
        return;
    }

    // (opsional) fetch price langsung dari input atau API
    const price = parseFloat(document.getElementById("price")?.value) || 150;

    const pipValue = pipValueFromContract(pair, price);
    const riskAmount = balance * (riskPct / 100);

    const lot = riskAmount / (sl * pipValue);

    resultEl.textContent = lot.toFixed(2);
}
</script>

</body>
</html>
